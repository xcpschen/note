# IP 网络协议
IP（IPv4,IPv6）处在网络层，服务于TCP,UDP，ICMP,IGMP等；主要作用在于实现端对端节点之间的通信；主要功能模块：IP寻址，路由转发，IP分包组包；

优点：
- 提供最好的传输服务。
- 数据报处理是相对独立的，可以不按发送顺序接受。

缺点：
- 不可靠
- 无连接

## IP地址
IPv4地址长度32位，共5类，有广播地址，单播地址，多播地址；分配时，不可以全0和全1；使用点分制度；

- A 类
  - 0.0.0.0~127.255.255.255
  - 可网络号：$2^7 - 2$
```
  3130      23                        0
  +-+-------+-------------------------+
  |0|网络号  |        主机号            ｜
  +-+-------+-------------------------+
  |1|---7---|------------24-----------|  
```

- B 类
 - 128.0.0.0~191.255.255.255
 - 可网络号：$2^14 - 2$
```
  313029              15               0
  +-+-+---------------+----------------+
  |1|0|     网络号     |主机号           ｜
  +-+-+---------------+----------------+
  |-2-|-------14------|-------16-------|  
```
- C 类
 - 192.0.0.0~223.255.255.255
 - 可网络号：$2^21 - 2$
```
  31302928                     8      0
  +-+-+-+----------------------+--------+
  |1|1|0|    网络号             |主机号   ｜
  +-+-+-+----------------------+--------+
  |--3--|-----------21---------|---8----|  
```
- D 类
 - 224.0.0.0~239.255.255.255
```
  3130292827                            0
  +-+-+-+-+-----------------------------+
  |1|1|1|0|           多播组号           ｜
  +-+-+-+-+-----------------------------+
  |---4---|-------------28--------------|  
```
- E 类
 - 240.0.0.0~247.255.255.255
```
  313029282726                            0
  +-+-+-+-+-+----------------------------+
  |1|1|1|1|0｜                           ｜
  +-+-+-+-+-+----------------------------+
  |----5----|-------------27--------------|  
```

## IP数据报
```
   0    3    7        15               31
---+----+----+--------+----------------+
｜ | 版 ｜长  |服务类型 ｜     总         ｜
｜ | 本 ｜度  |  IOS   ｜    长度        ｜
｜ +------------------+---+------------+
｜ | 标               ｜标 | 片         ｜
｜ | 识               ｜志 |偏移        ｜
｜ +---------+-------+-----------------+
｜ | TTL    ｜  协议  ｜       首部检验和 ｜
20 |        ｜       ｜                ｜
字节+--------+-------+-----------------+
｜ |          源                       |
｜ |       IP地址                      ｜
｜ +------------------+----------------+
｜ |          目的                     |
｜ |       IP地址                      ｜
---+------------------+----------------+
   |             选项                  ｜
   |            可有可无                ｜
   +-----------------------------------+
   |             数                    ｜
   |             据                    ｜
   +-----------------------------------+


```
