### 什么是defer
$\qquad$注册延迟调用机制，让函数或语句从当前函数执行完毕（return或panic）执行
### defer 的原理
$\qquad$ **栈**,先定义后执行-逆序执行，声明时，会把函数压栈，参数会被拷贝下来。如果defer执行的函数是nil，则会panic
### defer 执行顺序
$\qquad$ 先定义后执行-逆序执行，如果是执行函数，则参数值是调用函数的返回值，其值会先计算好，再压栈。
### defer 的对外部变量的引用
  - 函数参数
    $\qquad$ 定义时，吧值传入然后被保存成新的，值变量必须是defer定义之前存在的，或申明的。
  - 闭包引用
    $\qquad$ 会在defer调用时根据上下文确定其值
    如果复制的变量是引用，则在函数内会改变其值
### defer与闭包
$\qquad$ 函数以其相关引用环境组合的实体，匿名函数
### 经典使用场景
$\qquad$ 成对操作场景，打开/关闭链接；加锁/释放锁；打开/关闭文件等
